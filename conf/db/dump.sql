DROP TABLE A_MOVIE_GENRE;
DROP TABLE GENRE;
DROP TABLE MOVIE;
DROP TABLE NATIONALITY;

CREATE TABLE NATIONALITY (
	COUNTRY VARCHAR(3)
);

CREATE TABLE GENRE (
	NAME VARCHAR(50)
);

CREATE TABLE MOVIE (
	ORIGINAL_TITLE VARCHAR(250),
	SYNOPSIS VARCHAR(1000),
	REALISATION_YEAR INT,
	TITLE VARCHAR(250),
	FRENCH_RELEASE DATE,
	NOTE INT,
	NATIONALITY VARCHAR(3)
);

CREATE TABLE A_MOVIE_GENRE (
	ID SERIAL,
	GENRE_NAME VARCHAR(50),
	MOVIE_ORIGINAL_TITLE VARCHAR(250)
);

ALTER TABLE NATIONALITY ADD CONSTRAINT pk_nationality PRIMARY KEY(COUNTRY);
ALTER TABLE GENRE ADD CONSTRAINT pk_genre PRIMARY KEY(NAME);
ALTER TABLE MOVIE ADD CONSTRAINT ck_movie_note CHECK (NOTE >= 0 AND NOTE <= 10);
ALTER TABLE MOVIE ADD CONSTRAINT pk_movie PRIMARY KEY (ORIGINAL_TITLE);
ALTER TABLE MOVIE ADD CONSTRAINT fk_movie_nationality FOREIGN KEY (NATIONALITY) REFERENCES NATIONALITY(COUNTRY);
ALTER TABLE A_MOVIE_GENRE ADD CONSTRAINT pk_a_movie_genre PRIMARY KEY (ID);
ALTER TABLE A_MOVIE_GENRE ADD CONSTRAINT fk_a_movie_genre_movie FOREIGN KEY (ID_MOVIE) REFERENCES MOVIE(ID_MOVIE);
ALTER TABLE A_MOVIE_GENRE ADD CONSTRAINT fk_a_movie_genre_genre FOREIGN KEY (GENRE_NAME) REFERENCES GENRE(NAME);